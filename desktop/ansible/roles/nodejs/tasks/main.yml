- name: "install asdf's plugin"
  become: false
  command: "asdf plugin-add nodejs https://github.com/asdf-vm/asdf-nodejs.git"
  args:
    creates: "~/.asdf/plugins/nodejs/LICENSE"

- name: "Import keyring"
  command: "~/.asdf/plugins/nodejs/bin/import-release-team-keyring"

- name: "install {{ nodejs_version }}"
  become: false
  command: "~/.asdf/bin/asdf install nodejs {{ nodejs_version }}"
  args:
    creates: "~/.asdf/installs/elixir/{{ nodejs_version }}/bin/elixir"

- name: "use global {{ nodejs_version }}"
  become: false
  command: "~/.asdf/bin/asdf global nodejs {{ nodejs_version }}"
  changed_when: false
